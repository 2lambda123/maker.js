<!DOCTYPE html>
<html>
<head>
    <title>Maker.js Playground</title>
	<meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="../external/codemirror/lib/codemirror.css" rel="stylesheet" />
    <link href="../external/codemirror/theme/twilight.css" rel="stylesheet" />
    <script src="../external/codemirror/lib/codemirror.js"></script>
    <script src="../external/codemirror/mode/javascript/javascript.js"></script>

    <script src="../external/TKRequire/TKRequire.js"></script>
    <script src="../target/js/browser.maker.js"></script>
    <script src="playground.js"></script>
    <script>

        //need to call this to cache it once
        var makerjs = require('makerjs');

        function doEval() {
            var text = myCodeMirror.doc.getValue();

            var html = MakerJsPlayground.runJavaScriptGetHTML(text);

            document.getElementById('view').innerHTML = html;
        }


    </script>
    <style type="text/css" media="screen">
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
        body {
            overflow: hidden;
        }
    </style>
</head>
<body onload="doEval()">

    <div id="view" style="border: 1px solid silver; min-height: 200px"></div>

<textarea id="textarea1">
var makerjs = require('makerjs');
function Spiral(loops, startRadius, spacing) {
    if (spacing == 0) loops = 1;
    function revolution(r) {
        this.paths = {
            arc1: new makerjs.paths.Arc([0, 0], r, 0, 90),
            arc2: new makerjs.paths.Arc([0, -spacing], r + spacing, 90, 180),
            arc3: new makerjs.paths.Arc([2 * spacing, -spacing], r + 3 * spacing, 180, 270),
            arc4: new makerjs.paths.Arc([2 * spacing, 0], r + 4 * spacing, 270, 360)
        };
    }
    this.models = {};
    for (var i = 0; i < loops; i++) {
        this.models['loop' + i] = new revolution(startRadius + i * spacing * 6);
    }
}
Spiral.metaParameters = [
    { title: "loops", type: "range", min: 1, max: 60, step: 1, value: 9 },
    { title: "start radius", type: "range", min: 0, max: 50, step: .01, value: 0.33 },
    { title: "spacing", type: "range", min: 0, max: 5, step: .01, value: 1 }
];
module.exports = Spiral;
</textarea>

    <script>
        var myCodeMirror = CodeMirror.fromTextArea(document.getElementById('textarea1'), { lineNumbers: true, theme: 'twilight' });
    </script>

    <button onclick="doEval()">Eval</button>

</body>
</html>
