<!DOCTYPE html>
<html>
<head>
    <title>Maker.js debug TypeScript source code</title>

    <link href="viewer.css" rel="stylesheet" />

    <script src="../src/core/maker.js"></script>
    <script src="../src/core/angle.js"></script>
    <script src="../src/core/point.js"></script>
    <script src="../src/core/units.js"></script>
    <script src="../src/core/measure.js"></script>
    <script src="../src/core/path.js"></script>
    <script src="../src/core/model.js"></script>
    <script src="../src/core/tools.gap.js"></script>
    <script src="../src/core/exporter.js"></script>
    <script src="../src/core/dxf.js"></script>
    <script src="../src/core/xml.js"></script>
    <script src="../src/core/svg.js"></script>
    <script src="../src/models/RoundRectangle.js"></script>
    <script src="../src/models/BoltRectangle.js"></script>
    <script src="../src/models/BoltCircle.js"></script>
    <script src="../src/models/OvalArc.js"></script>
    <script src="viewer.js"></script>

    <script>

        Viewer.Params = {
            count: { type:"range", min: 1, max: 10, step: 1, value: 1 },
            height: { type: "range", min: 1, max: 7, step: .1, value: 3 },
            width: { type: "range", min: 1, max: 7, step: .1, value: 4 },
            radius: { type: "range", min: 0, max: 2, step: .1, value: .25 },
            angle: { type: "range", min: -90, max: 90, step: 2.5, value: 0 }
        };

        Viewer.Render = function (params) {

            function myModelFactory() {

                this.paths = [];
                this.models = [];

                var circle = makerjs.createCircle('c1', [], Math.min(params.height, params.width) / 2 - .5);

                if (params.radius < 0.5) {
                    this.models.push(makerjs.model.move(new makerjs.models.BoltRectangle(params.width - .4, params.height - .4, .07), [.2, .2]));
                }

                this.paths.push(makerjs.path.moveRelative(circle, [params.width / 2, params.height / 2]));

                this.models.push(new makerjs.models.RoundRectangle(params.width, params.height, params.radius));

                this.models.push(makerjs.model.move(new makerjs.models.BoltCircle(circle.radius + 0.25, .05, 6), [params.width / 2, params.height / 2]));

                makerjs.model.rotate(this, params.angle, makerjs.point.zero());
            }

            //modeling
            var myModel = {
                units: makerjs.unitType.Inch,
                models: [new myModelFactory()]
            };

            var m = makerjs.measure.modelExtents(myModel.models[0]);
            var x = m.high.x - m.low.x + .025;

            for (var i = 1; i < params.count; i++) {
                myModel.models.push(makerjs.model.move(new myModelFactory(), [x * i, 0]));
            }

            return myModel;
        }


    </script>

</head>
<body>

    <div class="logo">Maker.js</div>

    <div id="params">
    </div>

    <div id="view">
        <div id="svg-render" class="svg-zone"></div>
        <div id="svg-guides" class="svg-zone"></div>
        <div id="export-zone"></div>
    </div>

    <div class="optionpanel">
        <a href="#" onmouseover="Viewer.showExport('dxf')" onmouseout="Viewer.hideExport()" onclick="this.href = Viewer.getExport('dxf');" title="Download works in Chrome and Firefox" download="myModel.dxf">download dxf</a>
        <a href="#" onmouseover="Viewer.showExport('svg')" onmouseout="Viewer.hideExport()" onclick="this.href = Viewer.getExport('svg');" title="Download works in Chrome and Firefox" download="myModel.svg">download svg</a>
        <a href="#" onmouseover="Viewer.showExport('json')" onmouseout="Viewer.hideExport()" onclick="this.href = Viewer.getExport('json');" title="Download works in Chrome and Firefox" download="myModel.json">download json</a>
        <label for="checkAnnotate"> annotate:</label> <input id="checkAnnotate" type="checkbox" onclick="Viewer.Refresh()" />
    </div>

</body>

</html>
