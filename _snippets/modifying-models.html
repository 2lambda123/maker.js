---
title: Modifying models
---

<p>
    We know that models are relatively simple objects with a well known recursive structure.
    This allows us to modify them for different purposes. Let's modify and combine two different models
    in one drawing.
</p>

<p>
    For this example we will use ovals to make an oval L shape. We begin by creating a model function that has two ovals:
</p>

{% highlight javascript %}
var makerjs = require('makerjs');

function ovalL(width, height, thickness) {
    var ovalH = new makerjs.models.Oval(width, thickness);
    var ovalV = new makerjs.models.Oval(thickness, height);

    this.models = {
        h: ovalH, v: ovalV
    };
}

var svg = makerjs.exporter.toSVG(new ovalL(100, 100, 37));

document.write(svg);
{% endhighlight %}

<a class="fiddle" href="http://jsfiddle.net/danmarshall/qf4x1gqx/" target="_blank">try it in JsFiddle &#8663;</a>

<script>
    var makerjs = require('makerjs');

    function ovalL(width, height, thickness) {
        var ovalH = new makerjs.models.Oval(width, thickness);
        var ovalV = new makerjs.models.Oval(thickness, height);

        this.models = {
            h: ovalH, v: ovalV
        };
    }

    var svg = makerjs.exporter.toSVG(new ovalL(100, 100, 37));

    document.write(svg);
</script>

<p>
    There are overlapping arcs in the lower left corner. We can remove them if we know their id and position in the
    heirarchy. There are several ways we can inspect this model, here are a few:
</p>

<ul>
    <li>
        Look at the code which created it. This may involve deep lookups. For example, the <a href="https://github.com/Microsoft/maker.js/blob/master/src/models/Oval.ts">Oval source code</a>
        references the <a href="https://github.com/Microsoft/maker.js/blob/master/src/models/RoundRectangle.ts">RoundRectangle source code</a>.
    </li>
    <li>Use the browser's JavaScript debugger to set a breakpoint in your model.</li>
    <li>Use the browser's DOM inspector to traverse the rendered SVG.</li>
</ul>

<p>
    By looking at the source code we know that an Oval is a RoundRectangle and that the ids for arcs are <i>BottomLeft</i>, <i>BottomRight</i>, <i>TopLeft</i> and <i>TopRight</i>.
    The ids for the sides are <i>Left</i>, <i>Right</i>, <i>Top</i> and <i>Bottom</i>.
</p>

<p>
    To remove a path we use the JavaScript <b>delete</b> keyword:
</p>

{% highlight javascript %}
var makerjs = require('makerjs');

function ovalL(width, height, thickness) {
    var ovalH = new makerjs.models.Oval(width, thickness);
    var ovalV = new makerjs.models.Oval(thickness, height);
    
    //delete the lower arcs from the vertical oval
    delete ovalV.paths.BottomLeft;
    delete ovalV.paths.BottomRight;

    //delete the inside arc of the horizontal
    delete ovalH.paths.TopLeft;
    
    this.models = {
        h: ovalH, v: ovalV
    };
}

var svg = makerjs.exporter.toSVG(new ovalL(100, 100, 37));

document.write(svg);
{% endhighlight %}

<a class="fiddle" href="http://jsfiddle.net/danmarshall/qf4x1gqx/1/" target="_blank">try it in JsFiddle &#8663;</a>

<script>
var makerjs = require('makerjs');

function ovalL(width, height, thickness) {
    var ovalH = new makerjs.models.Oval(width, thickness);
    var ovalV = new makerjs.models.Oval(thickness, height);
    
    //delete the lower arcs from the vertical oval
    delete ovalV.paths.BottomLeft;
    delete ovalV.paths.BottomRight;

    //delete the inside arc of the horizontal
    delete ovalH.paths.TopLeft;
    
    this.models = {
        h: ovalH, v: ovalV
    };
}

var svg = makerjs.exporter.toSVG(new ovalL(100, 100, 37));

document.write(svg);
</script>

<p>
    The next step is to eliminate the overlap in the lines. Here are two approaches to do this:
</p>

<p>
    Adjust only the x or y component of the point:
</p>

{% highlight javascript %}
var makerjs = require('makerjs');

function ovalL(width, height, thickness) {
    var ovalH = new makerjs.models.Oval(width, thickness);
    var ovalV = new makerjs.models.Oval(thickness, height);
    
    delete ovalV.paths.BottomLeft;
    delete ovalV.paths.BottomRight;
    delete ovalH.paths.TopLeft;

    //move the x of the horizontal's top
    ovalH.paths.Top.end[0] = thickness;
    
    //move the y of the vertical's right
    ovalV.paths.Right.origin[1] = thickness;
    
    this.models = {
        h: ovalH, v: ovalV
    };
}

var svg = makerjs.exporter.toSVG(new ovalL(100, 100, 37));

document.write(svg);
{% endhighlight %}

<a class="fiddle" href="http://jsfiddle.net/danmarshall/qf4x1gqx/2/" target="_blank">try it in JsFiddle &#8663;</a>

<script>
var makerjs = require('makerjs');

function ovalL(width, height, thickness) {
    var ovalH = new makerjs.models.Oval(width, thickness);
    var ovalV = new makerjs.models.Oval(thickness, height);
    
    delete ovalV.paths.BottomLeft;
    delete ovalV.paths.BottomRight;
    delete ovalH.paths.TopLeft;

    //move the x of the horizontal's top
    ovalH.paths.Top.end[0] = thickness;
    
    //move the y of the vertical's right
    ovalV.paths.Right.origin[1] = thickness;
    
    this.models = {
        h: ovalH, v: ovalV
    };
}

var svg = makerjs.exporter.toSVG(new ovalL(100, 100, 37));

document.write(svg);
</script>

<p>
    Share a point on both lines:
</p>

{% highlight javascript %}
var makerjs = require('makerjs');

function ovalL(width, height, thickness) {
    var ovalH = new makerjs.models.Oval(width, thickness);
    var ovalV = new makerjs.models.Oval(thickness, height);
    
    delete ovalV.paths.BottomLeft;
    delete ovalV.paths.BottomRight;
    delete ovalH.paths.TopLeft;

    //set to the same point
    ovalH.paths.Top.end = 
        ovalV.paths.Right.origin = 
            [thickness, thickness];
    
    this.models = {
        h: ovalH, v: ovalV
    };
}

var svg = makerjs.exporter.toSVG(new ovalL(100, 100, 37));

document.write(svg);
{% endhighlight %}

<a class="fiddle" href="http://jsfiddle.net/danmarshall/qf4x1gqx/3/" target="_blank">try it in JsFiddle &#8663;</a>

<script>
var makerjs = require('makerjs');

function ovalL(width, height, thickness) {
    var ovalH = new makerjs.models.Oval(width, thickness);
    var ovalV = new makerjs.models.Oval(thickness, height);
    
    delete ovalV.paths.BottomLeft;
    delete ovalV.paths.BottomRight;
    delete ovalH.paths.TopLeft;

    //set to the same point
    ovalH.paths.Top.end =
        ovalV.paths.Right.origin =
            [thickness, thickness];
    
    this.models = {
        h: ovalH, v: ovalV
    };
}

var svg = makerjs.exporter.toSVG(new ovalL(100, 100, 37));

document.write(svg);
</script>
